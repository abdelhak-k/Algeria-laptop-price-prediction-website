{% extends 'predictor/base.html' %}

{% block title %}Price Prediction Result{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <!-- Result Card -->
        <div class="card mb-4">
            <div class="card-header text-center">
                <h2><i class="fas fa-chart-line me-2"></i>Prediction Result</h2>
            </div>
            <div class="card-body p-4">
                {% if result.success %}
                <div class="price-result mb-4">
                    <p class="mb-2"><i class="fas fa-tag me-2"></i>Estimated Price</p>
                    <h3>price = {{ result.predicted_price_formatted }}</h3>
                    <div class="mt-3" style="font-size: 0.8rem; opacity: 0.8; font-weight: 400;">
                        min_price = {{ result.min_price_formatted }} , max_price = {{ result.max_price_formatted }}
                    </div>
                </div>
                
                <!-- Specs Summary -->
                <div class="form-section">
                    <h5><i class="fas fa-list-ul me-2"></i>Laptop Specifications</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <table class="table table-sm">
                                <tr>
                                    <th>Brand:</th>
                                    <td>{{ form_data.brand }}</td>
                                </tr>
                                <tr>
                                    <th>Series:</th>
                                    <td>{{ form_data.series }}</td>
                                </tr>
                                <tr>
                                    <th>Condition:</th>
                                    <td>{{ form_data.condition }}</td>
                                </tr>
                                <tr>
                                    <th>CPU:</th>
                                    <td>{{ form_data.cpu_family }}{% if form_data.cpu_generation and form_data.cpu_generation != '0' %} Gen {{ form_data.cpu_generation }}{% endif %}{% if form_data.cpu_suffix %} {{ form_data.cpu_suffix }}{% endif %}</td>
                                </tr>
                                <tr>
                                    <th>Professional:</th>
                                    <td>{% if form_data.is_pro %}Yes{% else %}No{% endif %}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <table class="table table-sm">
                                <tr>
                                    <th>GPU:</th>
                                    <td>{{ form_data.gpu_tier }}{% if form_data.gpu_suffix %} {{ form_data.gpu_suffix }}{% endif %}</td>
                                </tr>
                                <tr>
                                    <th>RAM:</th>
                                    <td>{{ form_data.ram_size_gb }} GB</td>
                                </tr>
                                <tr>
                                    <th>SSD:</th>
                                    <td>{{ form_data.ssd_size_gb }} GB</td>
                                </tr>
                                <tr>
                                    <th>HDD:</th>
                                    <td>{% if form_data.hdd_size_gb %}{{ form_data.hdd_size_gb }} GB{% else %}None{% endif %}</td>
                                </tr>
                                <tr>
                                    <th>Year:</th>
                                    <td>{{ form_data.listing_year }}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                
                {% else %}
                <div class="alert alert-danger" role="alert">
                    <h4 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>Prediction Error</h4>
                    <p>{{ result.error }}</p>
                    <hr>
                    <p class="mb-0">Please make sure the model has been trained and saved properly.</p>
                </div>
                {% endif %}
                
                <div class="text-center mt-4">
                    <button onclick="window.history.back()" class="btn btn-primary btn-predict">
                        <i class="fas fa-arrow-left me-2"></i>Go Back
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Tips Card -->
        <div class="card">
            <div class="card-body p-4">
                <h5><i class="fas fa-lightbulb me-2 text-warning"></i>Price Factors</h5>
                <ul class="list-unstyled">
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i><strong>Condition:</strong> "Never Used" laptops command 15-25% premium over "Good Condition"</li>
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i><strong>Brand:</strong> Apple and premium brands have higher resale value</li>
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i><strong>CPU Generation:</strong> Newer generations significantly impact price</li>
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i><strong>GPU:</strong> Dedicated graphics add substantial value, especially RTX cards</li>
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i><strong>Storage:</strong> SSDs are valued higher than HDDs</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
